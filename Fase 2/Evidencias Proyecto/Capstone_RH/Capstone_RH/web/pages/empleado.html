<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Perfil de empleado</title>
    <link rel="stylesheet" href="../css/empleado.css">
</head>

<body>
    <div class="container" role="main">
        <aside class="profile" aria-labelledby="perfil-title">
            <div class="profile-head">
                <div class="avatar" id="perfil-avatar" aria-hidden="true">US</div>
                <div class="meta">
                    <h2 id="perfil-title">Empleado</h2>
                    <p id="perfil-rol">Empleado</p>
                    <div class="small" id="perfil-id">ID: EMP-00000</div>
                </div>
            </div>

            <div class="info">
                <div><strong>Email:</strong> <span id="perfil-email">—</span></div>
                <div><strong>Teléfono:</strong> <span id="perfil-telefono">—</span></div>
                <div class="small" id="perfil-ultimo-acceso" style="margin-top:8px;">Último acceso: —</div>
            </div>

            <nav class="access" aria-label="Accesos rápidos">
                <button type="button" class="access-btn active" data-target="docs" aria-pressed="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M20 18H4V8h16m0-2h-8l-2-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2" />
                    </svg>
                    Documentos
                </button>

                <button type="button" class="access-btn" data-target="liq" aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M7 15h2c0 1.08 1.37 2 3 2s3-.92 3-2c0-1.1-1.04-1.5-3.24-2.03C9.64 12.44 7 11.78 7 9c0-1.79 1.47-3.31 3.5-3.82V3h3v2.18C15.53 5.69 17 7.21 17 9h-2c0-1.08-1.37-2-3-2s-3 .92-3 2c0 1.1 1.04 1.5 3.24 2.03C14.36 11.56 17 12.22 17 15c0 1.79-1.47 3.31-3.5 3.82V21h-3v-2.18C8.47 18.31 7 16.79 7 15" />
                    </svg>
                    Liquidación
                </button>

                <button type="button" class="access-btn" data-target="sol" aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z" />
                    </svg>
                    Solicitudes
                </button>

                <button class="access-btn" data-target="cap" aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M12 3L1 9l11 6l9-4.91V17h2V9L12 3Zm0 13L5 12.18V16L12 19l7-3v-3.82L12 16Z" />
                    </svg>
                    Capacitaciones
                </button>

                <button type="button" id="btnAsistencia" class="access-btn" aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M12 20a7 7 0 0 1-7-7a7 7 0 0 1 7-7a7 7 0 0 1 7 7a7 7 0 0 1-7 7m0-16a9 9 0 0 0-9 9a9 9 0 0 0 9 9a9 9 0 0 0 9-9a9 9 0 0 0-9-9m.5 4H11v6l4.75 2.85l.75-1.23l-4-2.37z" />
                    </svg>
                    Asistencia
                </button>


                <button type="button" class="access-btn admin-btn" id="btnAdmin" style="display:none"
                    aria-pressed="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M12 12h7c-.53 4.11-3.28 7.78-7 8.92zH5V6.3l7-3.11M12 1L3 5v6c0 5.55 3.84 10.73 9 12c5.16-1.27 9-6.45 9-12V5z" />
                    </svg>
                    Panel administrador
                </button>
                <button type="button" class="logout-btn" id="btnLogout" title="Cerrar sesión"
                    aria-label="Cerrar sesión">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        aria-hidden="true">
                        <path fill="currentColor"
                            d="M19 3H5c-1.11 0-2 .89-2 2v4h2V5h14v14H5v-4H3v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2m-8.92 12.58L11.5 17l5-5l-5-5l-1.42 1.41L12.67 11H3v2h9.67z" />
                    </svg>
                    Cerrar sesión
                </button>
            </nav>
        </aside>

        <main class="main" aria-live="polite">
            <!-- Documentos -->
            <section id="docs" class="content active" aria-labelledby="docs-title">
                <h3 id="docs-title">Documentos</h3>
                <p class="small">Aquí puede ver y descargar los documentos oficiales asociados al empleado.</p>
                <div id="documentsLoading" class="small" style="color:var(--muted);margin:8px 0;">Cargando documentos…
                </div>
                <div id="documentsError" class="small" style="color:#b91c1c;margin:8px 0;display:none;"></div>
                <div id="documentsList" class="documents-list" aria-live="polite"></div>
            </section>

            <!-- Liquidaciones -->
            <section id="liq" class="content" aria-labelledby="liq-title">
                <h3 id="liq-title">Liquidación</h3>
                <p class="small">Seleccione una liquidación para ver detalle o descargar el comprobante.</p>
                <div id="liquidacionesList" class="liquidaciones-list" aria-live="polite"></div>
            </section>

            <!-- Capacitaciones -->
            <section id="cap" class="content" aria-labelledby="cap-title">
                <h3 id="cap-title">Capacitaciones</h3>
                <p class="small">Documentos y certificados de capacitaciones realizadas.</p>
                <div id="capList" class="documents-list" aria-live="polite"></div>
            </section>

            <!-- Solicitudes -->
            <section id="sol" class="content" aria-labelledby="sol-title">
                <h3 id="sol-title">Solicitudes</h3>
                <p class="small">Revisa tus solicitudes pasadas o crea una nueva.</p>

                <!-- LISTA RELLENADA POR JS -->
                <div id="solicitudesList" class="solicitudes-list" aria-live="polite"></div>

                <hr style="margin:16px 0;border:none;border-top:1px solid #eef2f6" />

                <!-- FORMULARIO NUEVA SOLICITUD -->
                <form id="request-form" onsubmit="submitRequest(event)" aria-label="Crear nueva solicitud"
                    class="req-form">
                    <div class="req-form__row">
                        <label class="req-label">
                            <span>Tipo de solicitud</span>
                            <select name="tipo" required class="req-input">
                                <option value="">Selecciona una opción</option>
                                <option value="permiso">Permiso</option>
                                <option value="vacaciones">Vacaciones</option>
                                <option value="documento">Documento</option>
                                <option value="otro">Otro</option>
                            </select>
                        </label>
                        <label class="req-label">
                            <span>Asunto</span>
                            <input name="asunto" placeholder="Ej: Permiso médico 24/11" required class="req-input" />
                        </label>
                    </div>
                    <label class="req-label">
                        <span>Detalle</span>
                        <textarea name="mensaje" rows="5" placeholder="Describe tu solicitud…" required
                            class="req-textarea"></textarea>
                    </label>
                    <div class="req-form__row req-form__row--file">
                        <label class="req-label req-label--file">
                            <input type="file" name="adjunto" class="req-file" />
                            <span class="req-file__btn">Seleccionar archivo</span>
                            <span class="req-file__name">Ningún archivo seleccionado</span>
                        </label>
                        <button class="btn req-submit" type="submit">
                            <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M5 20h14v-2H5v2Zm7-16L5.33 9h3.67v4h4V9h3.67L12 4Z" />
                            </svg>
                            Enviar solicitud
                        </button>
                    </div>
                    <div id="request-notice" class="notice" role="status" aria-live="polite">
                        Solicitud enviada correctamente.
                    </div>
                </form>
            </section>

            <!-- MODAL DETALLE SOLICITUD (empleado) -->
            <div id="solModalOverlay" class="sol-modal-overlay" style="display:none;">
                <div class="sol-modal">
                    <button type="button" id="solModalClose" class="btn small" style="margin-bottom:12px;">
                        ← Volver a solicitudes
                    </button>

                    <h3 id="solModalTitulo" style="margin:0 0 4px;">Solicitud</h3>
                    <p id="solModalMeta" class="small" style="margin:0 0 12px;">
                        <!-- Estado, fecha, empleado -->
                    </p>

                    <div class="sol-detail-grid">
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">ID solicitud</span>
                            <span class="sol-detail-value" id="solDetId">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Tipo</span>
                            <span class="sol-detail-value" id="solDetTipo">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Estado</span>
                            <span class="sol-detail-value" id="solDetEstado">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Fecha de creación</span>
                            <span class="sol-detail-value" id="solDetCreacion">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Fecha desde</span>
                            <span class="sol-detail-value" id="solDetDesde">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Fecha hasta</span>
                            <span class="sol-detail-value" id="solDetHasta">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Horas</span>
                            <span class="sol-detail-value" id="solDetHoras">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Monto</span>
                            <span class="sol-detail-value" id="solDetMonto">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Empleado</span>
                            <span class="sol-detail-value" id="solDetEmpleado">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Motivo</span>
                            <span class="sol-detail-value" id="solDetMotivo">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Detalle</span>
                            <span class="sol-detail-value" id="solDetDetalle">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Asunto</span>
                            <span class="sol-detail-value" id="solDetAsunto">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Mensaje</span>
                            <span class="sol-detail-value" id="solDetMensaje">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Cantidad de adjuntos</span>
                            <span class="sol-detail-value" id="solDetAdjuntos">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Resuelto por (ID usuario)</span>
                            <span class="sol-detail-value" id="solDetResueltoPor">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Fecha de resolución</span>
                            <span class="sol-detail-value" id="solDetFechaRes">—</span>
                        </div>
                        <div class="sol-detail-row">
                            <span class="sol-detail-label">Comentario de resolución</span>
                            <span class="sol-detail-value" id="solDetComentario">—</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script type="module" src="../js/empleado.js"></script>
</body>

</html>